<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ChangePassword</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>
<body>
<div class="container">
    <div class="card">
        <form>

            <div class="form-group">
                <div class="text-center" id="display"></div>
                <label>Email Id</label>
                <input class="form-control" type="email" id="tbemail" name="email" placeholder="email">
            </div>

            <div class="form-group">
                <label>New Password</label>
                <input class="form-control" type="password" id="tbnewPwd" name="password" placeholder="Password">
            </div>
            <div class="form-group">
                <label>Confirm Password</label>
                <input class="form-control" type="password" id="tbconfirmPwd" name="password" placeholder="Password">
            </div>

            <div class="text-center">
                <button type="button" id="btnres" class="btn btn-success" onclick="Password()">Change Password</button>
            </div><br>
            <div class="text-center">
                <label><a href="login.html">Click Here To Login</a></label>
            </div>
        </form>
    </div>
</div>
</body>
<script>
    function Password(){
<!--       debugger-->
       let email, newPassword, confirmPassword
       email = document.getElementById("tbemail").value
       newPassword = document.getElementById("tbnewPwd").value
       confirmPassword = document.getElementById("tbconfirmPwd").value
       let user_data = new Array()
       user_data = JSON.parse(localStorage.getItem('userData'))?JSON.parse(localStorage.getItem('userData')):[]

        let current_user = user_data.filter((val)=>{
                return val.email==email
        })[0]
<!--        localEmail = current_user.email-->
<!--        console.log(localEmail)-->
        if(current_user != undefined){
               if(newPassword==confirmPassword){
                     current_user.password = newPassword
<!--        localStorage.setItem(current_user.password,newPassword)-->
                     localStorage.setItem('userData',JSON.stringify(user_data))
                     document.getElementById("display").innerHTML= "&#9989; &nbsp;<b>Password changed successfully</b>"
                     document.getElementById("display").style.width= "60%";
                     document.getElementById("display").style.height= "50%";
                     document.getElementById("display").style.margin="auto";
                     document.getElementById("display").style.marginTop="5px";
                     document.getElementById("display").style.marginBottom="5px";
                     document.getElementById("display").style.padding="auto";
                     document.getElementById("display").style.paddingLeft="6px";
                     document.getElementById("display").style.border= "1px dotted gold;"
                     document.getElementById("display").style.backgroundColor="green"
                     document.getElementById("display").style.opacity="0.7"
                     document.getElementById("display").style.color="white";
                     document.getElementById("display").style.cursor="context-menu";
              }
               else{
                     document.getElementById("display").innerHTML= "&#33; &nbsp;<b>Password doesn't match</b> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; x"
                     document.getElementById("display").style.width= "60%";
                     document.getElementById("display").style.height= "50%";
                     document.getElementById("display").style.margin="auto";
                     document.getElementById("display").style.marginTop="5px";
                     document.getElementById("display").style.marginBottom="5px";
                     document.getElementById("display").style.padding="auto";
                     document.getElementById("display").style.border= "1px dotted gold;"
                     document.getElementById("display").style.backgroundColor="red"
                     document.getElementById("display").style.opacity="0.7"
                     document.getElementById("display").style.color="black";
                     document.getElementById("display").style.cursor="context-menu";
               }
        }
        else{
             document.getElementById("display").innerHTML= "&#33; &nbsp;<b>Account doesn't exist with this mail id</b> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; x"
             document.getElementById("display").style.width= "60%";
             document.getElementById("display").style.height= "50%";
             document.getElementById("display").style.margin="auto";
             document.getElementById("display").style.marginTop="5px";
             document.getElementById("display").style.marginBottom="5px";
             document.getElementById("display").style.padding="auto";
             document.getElementById("display").style.border= "1px dotted gold;"
             document.getElementById("display").style.backgroundColor="red"
             document.getElementById("display").style.opacity="0.7"
             document.getElementById("display").style.color="black";
             document.getElementById("display").style.cursor="context-menu";
        }


    }
</script>
</html>